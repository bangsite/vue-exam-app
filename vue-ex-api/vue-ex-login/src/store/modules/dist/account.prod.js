"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.account=void 0;var _services=require("../../services"),_helpers=require("../../helpers"),user=JSON.parse(localStorage.getItem("user")),state=user?{status:{loggedIn:!0},user:user}:{status:{},user:null},actions={login:function(e,s){var t=e.dispatch,r=e.commit,u=s.username,o=s.password;r("loginRequest",{username:u}),_services.userService.login(u,o).then(function(e){r("loginSuccess",e),_helpers.router.push("/")},function(e){r("loginFailure",error),t("alert/error",error,{root:!0})})},logout:function(e){var s=e.commit;_services.userService.logout(),s("logout")},register:function(e,s){var t=e.dispatch,r=e.commit;r("registerRequest",s),_services.userService.register(s).then(function(e){r("registerSuccess",e),setTimeout(function(){t("alert/success","Registration successful",{root:!0})},function(e){r("registerFailure",e,{root:!0})})})}},mutations={loginRequest:function(e,s){e.status={loggingIn:!0},e.user=s},loginSuccess:function(e,s){e.status={loggingIn:!0},e.user=s},loginFailure:function(e){e.status={},e.user=null},logout:function(e){e.status={},e.user=null},registerRequest:function(e){e.status={registering:!0}},registerSuccess:function(e){e.status={}},registerFailure:function(e){e.status={}}},account={namespaced:!0,state:state,actions:actions,mutations:mutations};exports.account=account;