"use strict";var express=require("express"),DB=require("./db"),config=require("./config"),bcrypt=require("bcryptjs"),jwt=require("./jsonwebtoken"),bodyParser=require("body-parser"),db=new DB("sqlitedb"),app=express(),router=express.Router();router.use(bodyParser.urlencoded({extended:!1})),router.use(bodyParser.json());var enableCrossDomain=function(e,r,s){r.header("Access-Control-Allow-Origin","*"),r.header("Access-Control-Allow-Methods","*"),r.header("Access-Control-Allow-Headers","*"),s()};app.use(enableCrossDomain),router.post("/register",function(r,s){db.insert([r.body.name,r.body.email,bcrypt.hashSync(r.body.password,8)],function(e){return e?s.status(500).send("There are a problem registering the user."):void db.selectByEmail(r.body.email,function(e,r){if(e)return s.status(500).send("There was problem getting user")})})});